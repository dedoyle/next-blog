---
title: "视频格式、编解码器和容器"
date: "2022-03-06 21:30"
excerpt: "关于视频格式、编解码器和容器的相关介绍"
---

视频编码，是将数字视频导出为适合用户播放的格式和规范的过程。

每个视频都包含两个元素：

- Codecs，或者 compression-decompression 算法，见[网络视频编解码器指南](https://developer.mozilla.org/zh-CN/docs/Web/Media/Formats/Video_codecs)
- 格式，数据压缩成文件的类型

## Video Codecs

目前常用的视频编解码算法包括 H.264, HEVC, VP9, 和 AV1。常见的视频格式有 MKV, AVCHD, MP4, 和 WebM。每种视频编解码算法和文件格式都各有优缺点。在网络上流式传输内容没有灵丹妙药。某些视频编解码器和视频格式是开源的，这意味着源代码可供用户使用，用户有权出于任何目的研究、更改和分发软件给任何人。VP9 和 AV1 都是开源编解码器类型。MKV 和 WebM 也是开源的，由非营利组织开发，无需许可即可使用。

## Bitrate

比特率，是在给定事件单位内传送或处理的比特数。比特率越高，数据越多，这通常意味着更高质量的视频文件。选择比特率时，重要的是要考虑播放视频的设备。高比特率文件流需要大量处理能力来进行编码，并需要快速的互联网连接来下载播放。

## 最常见的 Codec：H.264

我们先来说说 H.264，也称为 AVC。

H.264 是使用最广泛的视频编解码器。当然，H.264 编解码器现在可能有点过时了，但这种类型的压缩技术无处不在，几乎所有平台和移动设备都可以使用解码器。H.264 可能不会长期作为标准。由于 4K 内容的激增，HEVC（高效视频编码或 H.265 的缩写）正慢慢变得无处不在。如果说 AVC 或 H.264 是 1080p 的编解码器，那么 HEVC 和 H.265 就是 4K 时代的编解码器。H.265 比 H.264 压缩视频的效率更高（因此是“高效率”）。这意味着 H.265 4K 内容比使用 H.264 压缩的 4K 内容更易于流式传输且质量更高。

## 新的 Codec：H.265 and VP9

H.265 是一种许可编解码器，这意味着您必须付费才能使用它。它的主要竞争对手 VP9 是由 Google 开发的免版税和开源编解码器。这意味着任何人都可以使用编解码器免费压缩他们的视频。通常，VP9 产生更一致或更可靠的流，而 H.265 (HEVC) 产生更高质量的视频。

两种编解码器之间的差异在于其压缩算法的优缺点。VP9 被开发用于制作文件较小的视频，因此更易于流式传输。H.265 使用多种处理技术压缩视频，最终创建保留非常高细节水平的压缩视频。

除了 VP9，还有另一种开源编解码器仍在开发中，称为 AV1。AOMedia Video 1 (AV1) 是一种开源、免版税的视频编码格式，专为通过 Internet 流式传输视频内容而设计。开发 AV1 是为了继承 VP9 编解码器，并在视频质量和文件大小方面直接与 HEVC 编解码器竞争。AV1 仍然是一个高度实验性的编解码器，但受到 Firefox、Google Chrome、VLC 媒体播放器、FFmpeg 等的支持。

## 最受欢迎的视频格式

视频格式是打包视频文件的容器、编解码器和元数据的整套存储规则。使用文件格式以便各种设备、平台和播放器可以处理和播放任意数量的编解码器。格式的开发旨在提高图像质量、减小文件大小、允许在各种设备上进行通用播放，并提供字幕等特殊功能。由于每天都有新格式被开发出来，因此很难都涵盖。相反，我们将专注于专门用于在线分发或内容流媒体的视频格式。

最流行的视频格式是 MP4，也称为 MPEG 4。MP4 是视频、音频和（包括字幕和静止图像等的）数据的多媒体容器。确保你不会混淆 MPEG 4 和 MPEG 4 Audio。 MPEG 4 的文件扩展名为 .MP4，而 MPEG 4 Audio 的文件扩展名为 .M4A，并且只能包含音频文件。那么，为什么 MP4 如此受欢迎呢？嗯，它主要与它在一系列设备中的普及程度有关。移动设备和桌面设备都可以播放 MP4 视频文件，因此大多数内容制作者都会使用它是有道理的。

## 视频和直播的回放技术

MP4 文件以恒定比特率 (CBR) 播放，这意味着无论您的网络带宽如何变化，您的视频流的质量都将保持在相同的比特率。还有其他支持自适应比特率 (ABR) 的文件格式，它将调整流的质量以匹配播放器的网速。支持 ABR 的最流行的格式之一是 HLS。HLS 或 HTTP 直播流使用自适应比特率流技术，通过传输基于 HTTP 的小文件段来实现高质量的流。这种格式流行的关键是 HTTP。HTTP 是互联网的通用语言协议，可以降低基础设施成本、扩大覆盖范围，可以容易的实现 HTML5 播放器。HLS 格式的另一个重要特性是 M3U8 文件描述符。此文件允许客户端或设备随时自动选择最佳质量流，以防止播放缓冲，无论带宽或 CPU 功率如何。
